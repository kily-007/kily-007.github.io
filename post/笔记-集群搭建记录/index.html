<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    kily007
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="kily007">
<meta name="description" content="我们虽然距离很远很远，非常非常的远，但是思念或许真的可以穿越时间和距离。">
<meta name="keywords" content="java,sql,大数据,笔记,c/c++,嵌入式">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/css/style.min.css" />
<link rel="stylesheet" href="https://kily-007.github.io//styles/main.css" />
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/script.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/icon.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.12/CDN/js/Card/prism.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.12/CDN/css/Card/prism.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>

    <!--点击特效-->
    <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js"></script>
    
            <!--CDN样式-->
            <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/hit-kounter-lc-0.3.0.js"></script>
            <script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
            
                <script>
                    (function() {
                        var bp = document.createElement('script');
                        var curProtocol = window.location.protocol.split(':')[0];
                        if (curProtocol === 'https') {
                            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                        } else {
                            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                        }
                        var s = document.getElementsByTagName("script")[0];
                        s.parentNode.insertBefore(bp, s);
                    })();
                </script>
                
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="https://kily-007.github.io/">
                    kily007
                </a>
            </div>

            <div class="menu navbar-right">
				<ul>
					
						<li><a class="menu-item" href="/">首页</a></li>
                    
						<li><a class="menu-item" href="/post/about">关于</a></li>
                    
						<li><a class="menu-item" href="/archives">归档</a></li>
                    
						<li><a class="menu-item" href="/tags">标签</a></li>
                    
						<li><a class="menu-item" href="/friends">邻居</a></li>
                    
						<li><a class="menu-item" href="/message">留言</a></li>
                    
					<li><a href="/tag/life">生活</a></li>
					<li><a class="menu-item" >更多</a>
						<ul class="dropdown-list">
							<li><a href="/tag/album">相册</a></li>
							<li><a href="/post/utils">工具</a></li>
							<li><a href="/post/source">资源</a></li>
						</ul>
					</li>
				<li>
					<input id="switch_default" type="checkbox" class="switch_default">
					<label for="switch_default" class="toggleBtn"></label>
				</li>
				</ul>
            </div>
			
            <form id="gridea-search-form" data-update="1592817813598" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>


<style>
.box{
    position:fixed;
    left:5px;
    height:712px;
    width: 60px;    
    text-align:center;
    overflow: hidden;
	background:url(https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/scroll.png) no-repeat;
	background-size:contain;
	display:none;
	top: 0px;
}
.box:hover{
    cursor:pointer;
}
</style>

<div id="box" class="box"></div> 

<script>
var timer  = null;
box.onclick = function(){
    cancelAnimationFrame(timer);
    timer = requestAnimationFrame(function fn(){
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if(oTop > 0){
            document.body.scrollTop = document.documentElement.scrollTop = oTop - 100;
            timer = requestAnimationFrame(fn);
        }else{
            cancelAnimationFrame(timer);
        }
    });
}
 $(window).scroll(function(){
	if($(window).scrollTop()>500){
		$('#box').fadeIn(500);
	}
	 else{$('#box').fadeOut(500);}
	})
</script>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="https://kily-007.github.io/">
                            kily007
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1592817813598" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="/">
                            首页
                        </a>
                        
                        <a class="menu-item" href="/post/about">
                            关于
                        </a>
                        
                        <a class="menu-item" href="/archives">
                            归档
                        </a>
                        
                        <a class="menu-item" href="/tags">
                            标签
                        </a>
                        
                        <a class="menu-item" href="/friends">
                            邻居
                        </a>
                        
                        <a class="menu-item" href="/message">
                            留言
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>

            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title" >
                                集群搭建记录
                            </h1>
                            
                                    <!--zh-->
                                    <div class="post-meta zh" style="margin:14px">
                                        &#x4F5C;&#x8005;:
                                        <a itemprop="author" rel="author" href="/">
                                            kily007
                                        </a>
                                        <span class="post-time">&#x65E5;&#x671F;: <a href="#">2019-09-04</a></span>
                                        <span class="post-readtime">&#x9605;&#x8BFB;&#x65F6;&#x95F4;:<a href="#">28.0
                                    &#x5206;&#x949F;</a></span>
                                        <span class="post-words">&#x5B57;&#x6570;:<a href="#">5678</a></span>
                                        
                                            <span class="post-category">&#x5206;&#x7C7B;:
                                
                                <a href="https://kily-007.github.io/tag/大数据/">大数据</a>
                                
                                <a href="https://kily-007.github.io/tag/笔记/">笔记</a>
                                
                                <a href="https://kily-007.github.io/tag/WgTHgP4UwG/">linux</a>
                                
                            </span>
                                            
                                                <span id="/post/笔记-集群搭建记录/" data-hk-page="current" class="leancloud-visitors view">
													 阅读量:
												     <a class="leancloud-visitors-count">-</a>
												 </span>
                                                
                                    </div>
                                    
                        </header>
                        
                        <div class="post-content">
                            <p>2018/12/12整理</p>
<p>Centos7  jdk1.8.0   hadoop-2.8.4    zookeeper-3.5.4    hbase-2.0.1    flume1.8.0    spark-2.3.1-bin-hadoop2.7<br>
scala-2.12.6           redis-4.0.11</p>
<p>校准系统时间：sudo /usr/sbin/ntpdate stdtime.gov.hk<br>
根据矫正过的系统时间设置硬件时钟：sudo hwclock -w</p>
<h1 id="目录">目录</h1>
<p>1、安装hadoop-2.8.4	1</p>
<p>2、配置zookeeper-3.5.4-beta	4</p>
<p>3、安装hbase	5</p>
<p>4、hbase建库建表	7</p>
<p>5、安装flume	8</p>
<p>6、安装spark	9</p>
<p>7、安装redis-4.0.11	10</p>
<p>8、kafka集群安装配置	12</p>
<p>9、spark streaming 接收kafka通道数据流</p>
<h1 id="1-安装hadoop-284">1、安装hadoop-2.8.4</h1>
<h2 id="1-修改主机名">1、修改主机名</h2>
<p>机名修改vim /etc/hostname</p>
<p>映射修改vim /etc/hosts</p>
<p>192.168.1.100 master</p>
<p>192.168.1.101 slave1</p>
<p>192.168.1.102 slave2</p>
<p>检查是否ping通：ping master –c 3</p>
<h2 id="2-创建hadoop用户和用户组">2、创建hadoop用户和用户组</h2>
<p>添加用户：useradd hadoop</p>
<p>密码：passwd hadoop</p>
<p>将用户添加到组：usermod –a –G hadoop hadoop</p>
<p>查询结果：cat /etc/group</p>
<p>设置管理员权限：visudo<br>
修改文件如下:</p>
<p>root ALL=(ALL) ALL<br>
hadoop ALL=(ALL) ALL</p>
<h2 id="2-设置ssh免密登录">2、设置SSH免密登录</h2>
<p>用hadoop用户登录<br>
#查看是否安装了ssh服务：rpm –qa | grep ssh<br>
查看ssh服务是否启动：ps -e | grep ssh<br>
测试SSH是否能用：ssh 主机名<br>
cd ~/.ssh/<br>
创建钥匙：ssh-keygen -t rsa<br>
将公匙加入keys中：cat id_rsa.pub &gt;&gt; authorized_keys<br>
修改文件夹权限chmod 600 ./authorized_keys<br>
把node1和node2的id_rsa.pub传给master:<br>
scp id_rsa.pub admin@master:~/.ssh/id_rsa.pub.slave1<br>
在master上综合所有公匙：<br>
cat id_rsa.pub&gt;&gt;authorized_keys<br>
cat id_rsa.pub.slave1&gt;&gt;authorized_keys<br>
cat id_rsa.pub.slave2&gt;&gt;authorized_keys<br>
将master中的公匙authorized_keys复制到node1和node2的.ssh目录下<br>
scp authorized_keys admin@slave1:/home/admin/.ssh/authorized_keys<br>
scp authorized_keys admin@slave2:/home/admin/.ssh/authorized_keys</p>
<p>** 插播：修改屏幕分辨率:**<br>
1 查看现有分辨率  xrandr<br>
2 添加自己想要的分辨率  cvt 1600 900<br>
3 增加新的分辨率 xrandr --newmode &quot;16000x900_60.00&quot;  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync<br>
--newmode后面的参数就是使用cvt的返回值Modeline后面的部分<br>
4.为当前显示增加这个分辨率 xrandr --addmode VGA-1 1440x900_60.00<br>
5 设置分辨率 xrandr --output VGA-1 --mode 1600x900_60.00</p>
<h2 id="3-安装jdk">3、安装jdk</h2>
<p>查看原装jdk：  rpm -qa | grep java<br>
卸载原先的jdk：<br>
sudo rpm -e --nodeps java-1.8.0-openjdk-1.8.0.181-7.b13.el7.x86_64<br>
sudo rpm -e --nodeps java-1.8.0-openjdk-headless-1.8.0.181-7.b13.el7.x86_64<br>
sudo rpm -e --nodeps java-1.7.0-openjdk-1.7.0.171-2.6.15.5.el7.x86_64<br>
sudo rpm -e --nodeps java-1.7.0-openjdk-headless-1.7.0.191-2.6.15.5.el7.x86_64</p>
<p>sudo mkdir /usr/java<br>
解压到/sur/java中：sudo tar -zxvf 下载/jdk-8u172-linux-x64.tar.gz -C /usr/java/<br>
配置本用户的环境变量：sudo vim /etc/profile<br>
export JAVA_HOME=/usr/java/jdk1.8.0<br>
export CLASSPATH=.:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mi>A</mi><mi>V</mi><msub><mi>A</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>l</mi><mi>i</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>d</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>j</mi><mi>a</mi><mi>r</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">JAVA_HOME/lib/dt.jar:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>JAVA_HOME/lib/tools.jar<br>
export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mi>A</mi><mi>V</mi><msub><mi>A</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>i</mi><mi>n</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">JAVA_HOME/bin:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>PATH</p>
<h2 id="4-用hadoop用户进入安装hadoop">4、用hadoop用户进入安装hadoop</h2>
<p>解压hadoop：tar -zxvf 下载/hadoop-2.8.4.tar.gz -C /home/admin/app/</p>
<p>sudo vim /home/admin/app/hadoop/etc/hadoop/hadoop-env.sh<br>
找到JAVA_HOME变量，修改此变量如下<br>
export JAVA_HOME=/usr/java/jdk1.8.0</p>
<p>赋予读写权限：sudo chmod 774 /home/admin/app/hadoop/etc/hadoop/</p>
<p>修改配置文件：vim /home/admin/app/hadoop/etc/hadoop/core-site.xml<br>
①core-site.xml</p>
<pre><code>&lt;configuration&gt;
	&lt;property&gt;
		&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
		&lt;value&gt;file:/home/admin/app/hadoop/tmp&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;fs.defaultFS&lt;/name&gt;
		&lt;value&gt;hdfs://master:9000&lt;/value&gt;
	&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p>②hdfs-site.xml</p>
<pre><code>&lt;configuration&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.replication&lt;/name&gt;
		&lt;value&gt;2&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
		&lt;value&gt;file:/home/admin/app/hadoop/tmp/dfs/name&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
		&lt;value&gt;file:/home/admin/app/hadoop/tmp/dfs/data&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.datanode.http.address&lt;/name&gt;&lt;!--hbase访问ip--&gt;
		&lt;value&gt;0.0.0.0:50075&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.replication.interval&lt;/name&gt;&lt;!--hadoop检查备份的时间间隔--&gt;
		&lt;value&gt;30&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.datanode.handler.count&lt;/name&gt;&lt;!--增加datanode的handler数--&gt;
		&lt;value&gt;300&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.namenode.handler.count&lt;/name&gt;&lt;!--namenode的handler数--&gt;
		&lt;value&gt;300&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;dfs.datanode.max.xcievers&lt;/name&gt;&lt;!--datanode的handler数--&gt;
		&lt;value&gt;1024&lt;/value&gt;
	&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p>③mapred-site.xml</p>
<pre><code>&lt;configuration&gt;
	&lt;property&gt;
		&lt;name&gt;mapreduce.framework.name&lt;/name&gt;
		&lt;value&gt;yarn&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;
		&lt;value&gt;master:10020&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;
 		&lt;value&gt;master:19888&lt;/value&gt;
	&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p>④yarn-site.xml</p>
<pre><code>&lt;configuration&gt;
	&lt;property&gt;
		&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
		&lt;value&gt;master&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
		&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
		&lt;value&gt;mapreduce_shuffle&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
	    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;
	    &lt;value&gt;true&lt;/value&gt;
	&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p>⑤在master机上在slaves中将localhost改为node1和node2</p>
<p>修改hadoop启动与停止pid文件<br>
将hadoop/sbin/hadoop-daemon.sh中添加HADOOP_PID_DIR=/home/admin/app/hadoop/pids<br>
将hadoop/sbin/yarn-daemon.sh中添加TARN_PID_DIR=/home/admin/app/hadoop/pids</p>
<p>⑥时间同步:<br>
在hadoop-env.sh添加:<br>
export HADOOP_OPTS=&quot;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>A</mi><mi>D</mi><mi>O</mi><mi>O</mi><msub><mi>P</mi><mi>O</mi></msub><mi>P</mi><mi>T</mi><mi>S</mi><mo>−</mo><mi>D</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>r</mi><mi mathvariant="normal">.</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>z</mi><mi>o</mi><mi>n</mi><mi>e</mi><mo>=</mo><mi>G</mi><mi>M</mi><mi>T</mi><mo>+</mo><mn>08</mn><mi mathvariant="normal">&quot;</mi><mi mathvariant="normal">在</mi><mi>y</mi><mi>a</mi><mi>r</mi><mi>n</mi><mo>−</mo><mi>e</mi><mi>n</mi><mi>v</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>Y</mi><mi>A</mi><mi>R</mi><msub><mi>N</mi><mi>O</mi></msub><mi>P</mi><mi>T</mi><mi>S</mi><mo>=</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">HADOOP_OPTS -Duser.timezone=GMT+08&quot;
在yarn-env.sh
YARN_OPTS=&quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord">.</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mord">8</span><span class="mord">&quot;</span><span class="mord cjk_fallback">在</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">.</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">&quot;</span></span></span></span>YARN_OPTS -Duser.timezone=GMT+08&quot;</p>
<p>⑦发送到slave1,slave2<br>
scp -r hadoop admin@slave1:/home/admin/app/</p>
<p>首次启动格式化：hdfs namenode -format</p>
<p>在浏览器中<br>
http://master:8088<br>
master:50070</p>
<p>hadoop进程：<br>
master: NameNode,SecondaryNameNode,ResourceManager<br>
slave1:DataNode,NodeManager<br>
slave2:DataNode,NodeManager</p>
<p>##5、各节点IP与名称<br>
192.168.146.140 master<br>
192.168.146.141 node1<br>
192.168.146.142 node2</p>
<p>关闭防火墙：systemctl stop firewalld<br>
查看防火墙状态：firewall-cmd --state</p>
<h1 id="2-配置zookeeper-354-beta">2、配置zookeeper-3.5.4-beta</h1>
<h2 id="1-解压cd-home-下载">1. 解压：cd /home /下载</h2>
<p>tar -zxvf 下载/zookeeper-3.5.4-beta.tar.gz -C /home/admin/app</p>
<h2 id="2-配置环境变量">2. 配置环境变量：</h2>
<p>vim /etc/profile<br>
source /etc/profile</p>
<p>export ZOOKEEPER_HOME=/home/admin/app/zookeeper<br>
export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>A</mi><mi>T</mi><mi>H</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">PATH:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>ZOOKEEPER_HOME/bin:$ZOOKEEPER_HOME/conf</p>
<h2 id="3-修改配置文件">3. 修改配置文件</h2>
<p>cd /home/hadoop/zookeeper-3.5.4-beta/conf<br>
cp zoo_sample.cfg zoo.cfg<br>
vim zoo.cfg</p>
<pre><code>tickTime=5000
initLimit=10
syncLimit=5
dataDir=/home/hadoop/app/zookeeper/data
clientPort=2181
dataLogDir=/home/hadoop/app/zookeeper/datalog

server.1=master:2888:3888
server.2=node1:2888:3888
server.3=node2:2888:3888
</code></pre>
<p>在zookeeper文件夹下创建data和datalog文件夹，在data文件夹下创建一个文件myid，内容为数字x，x为上配置中server.x中的数字：<br>
vim /home/hadoop//zookeeper-3.5.4-beta/data/myid</p>
<h2 id="4-启动zookeeper注意要按照myid大小顺序来依次在主机上启动">4. 启动zookeeper：注意要按照myid大小顺序来依次在主机上启动:</h2>
<p>zkServer.sh  start<br>
zkServer.sh restart<br>
zkServer.sh stop<br>
启动zookeeper/bin/zkServer.sh start<br>
重启zookeeper/bin/zkServer.sh restart</p>
<p>查看状态zookeeper/bin/zkServer.sh status<br>
修改文件夹权限：sudo chmod -R 777 zookeeper<br>
修改文件及子文件所属用户和用户组：sudo chown -R hadoop:hadoop zookeeper</p>
<p>启动成功：输入zkServer.sh status命令可以看到如下信息则表示安装配置成功<br>
Mode:follower(或者是leader)</p>
<p>zookeeper进程:<br>
master:QuorumPeerMain<br>
slave1:QuorumPeerMain<br>
slave2:QuorumPeerMain</p>
<p>连接客户端:zkCli.sh -timeout 5000 -r -server master:2181</p>
<h1 id="3-安装hbase">3、安装hbase</h1>
<h2 id="1-解压cd-下载">1. 解压：cd /下载</h2>
<p>tar -zxvf 下载/hbase-2.0.1-bin.tar.gz -C /home/admin/app</p>
<h2 id="2-配置环境变量-2">2. 配置环境变量：</h2>
<p>vim /etc/profile<br>
source /etc/profile</p>
<p>export HBASE_HOME=/home/admin/app/hbase<br>
export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>A</mi><mi>T</mi><mi>H</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">PATH:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>HBASE_HOME/bin</p>
<h2 id="3-配置文件sudo-gedit-hbaseconfhbase-envsh">3. 配置文件sudo gedit hbase/conf/hbase-env.sh</h2>
<ol>
<li>hbase-env.sh</li>
</ol>
<pre><code>    export JAVA_HOME=/usr/java/jdk1.8.0
    export HBASE_MANAGES_ZK=false
</code></pre>
<ol start="2">
<li>hbase-site.xml</li>
</ol>
<pre><code>    &lt;configuration&gt;
    &lt;property&gt;
    	&lt;name&gt;hbase.rootdir&lt;/name&gt;
    	&lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
    	&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;
    	&lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
    	&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;
    	&lt;value&gt;master,slave1,slave2&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
    	&lt;name&gt;hbase.master&lt;/name&gt;
    	&lt;value&gt;master:60000&lt;/value&gt;
    &lt;/property&gt;
    &lt;/configuration&gt;
</code></pre>
<ol start="3">
<li>regionservers</li>
</ol>
<pre><code>    slave1
    slave2
</code></pre>
<p>将hbase文件发送到slave1和slave2的相应位置:<br>
scp -r hbase admin@slave1:/home/admin/app/<br>
scp -r hbase admin@slave2:/home/admin/app/</p>
<h2 id="4-启动hbase-start-hbasesh">4. 启动hbase:   start-hbase.sh</h2>
<p>启动HBase的shell命令：hbase shell</p>
<p>先启动regionserver，在启动HMaster<br>
在regionServer上./hbase-daemon.sh start regionserver<br>
在master上执行：./bin/hbase-daemon.sh start master</p>
<h2 id="5-访问web页面httpmaster16010">5. 访问web页面:http://master:16010</h2>
<h2 id="6-设置备用hmaster-在hbaseconf下新建文件backup-masters-添加slave1作为备用hmaster">6. 设置备用hmaster: 在hbase/conf下新建文件backup-masters ,添加slave1作为备用hmaster</h2>
<h2 id="7-hbase启动错causedbyjavalangclassnotfoundexceptionorgapachehtracesamplerbuilder">7. hbase启动错:Causedby:java.lang.ClassNotFoundException:org.apache.htrace.SamplerBuilder</h2>
<p>解决办法:cp $HBASE_HOME/lib/client-facing-thirdparty/htrace-core-3.1.0-incubating.jar $HBASE_HOME/lib/</p>
<p>hbase进程：<br>
master: HMaster<br>
slave1:HRegionServer<br>
slave2:HRegionServer</p>
<h1 id="4-hbase建库建表">4、hbase建库建表</h1>
<h2 id="1-建表">1. 建表</h2>
<p>建表：  create ‘stu’, ‘information’ ,‘score’<br>
禁用表：disable ‘stu’<br>
删除表：（删除之前必须先禁用）：drop 'stu'<br>
验证表是否被删除: exists 'stu'<br>
清空表:truncate 'test'<br>
create 'test','ts',SPLITS=&gt;['0050','0100','0150','0200','0250','0300','0350','0400','0450','0500','0550','0600','0650','0700','0750','0800','0850','0900','0950','1000']</p>
<p>create 'test','ts',SPLITS=&gt;['10','20','30']</p>
<h2 id="2-增">2. 增</h2>
<p>插值：<br>
put 'stu','row0','information:name','Chengang'<br>
put 'stu','row0','information:sex','man'<br>
put 'stu','row0','information:age','23'<br>
put 'stu','row0','score:math','99'<br>
put 'stu','row0','score:English','89'<br>
put 'stu','row0','score:hbase','100'</p>
<h2 id="3-删">3. 删</h2>
<p>删除特定单元格：delete ‘stu’,’row2’,’score:hbase’<br>
删除所有单元格：delete ‘stu’,’row2’</p>
<h2 id="4-查">4. 查</h2>
<p>读取指定行：get ’<stu >’,’row1’<br>
读取指定列：get 'stu','row1',{COLUMN=&gt;'information:name'}</p>
<h2 id="5-改">5. 改</h2>
<p>更新：put 'stu','row2','score:English','99'</p>
<h2 id="6-常用指令">6. 常用指令：</h2>
<p>1列出表中所有数据：scan ‘stu’<br>
2计算表的行数量：count ‘stu’<br>
3为用户hadoop授予特定的权限:grant ‘hadoop’,’RXA’<br>
R - 代表读取权限<br>
W - 代表写权限<br>
X - 代表执行权限<br>
C - 代表创建权限<br>
A - 代表管理权限<br>
4撤销用户hadoop访问表(所有权限)的权限：revoke ‘hadoop’<br>
5列出stu表的所有用户权限: user_permission ‘stu’</p>
<h1 id="5-安装flume">5. 安装flume</h1>
<h2 id="1-解压-安装">1. 解压 安装</h2>
<p>sudo tar -zxvf apache-flume-1.8.0-bin.tar.gz -C /home/hadoop</p>
<h2 id="2-配置环境变量-3">2. 配置环境变量</h2>
<p>sudo gedit /etc/profile<br>
source /etc/profile<br>
export FLUME_HOME=/home/hadoop/flume<br>
export FLUME_CONF=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mi>L</mi><mi>U</mi><mi>M</mi><msub><mi>E</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>e</mi><mi>x</mi><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>P</mi><mi>A</mi><mi>T</mi><mi>H</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">FLUME_HOME/conf
export PATH=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span></span></span>PATH:$FLUME_HOME</p>
<h2 id="3-配置flume-envsh">3. 配置flume-env.sh</h2>
<pre><code>	cd /home/hadoop/flume/conf
	sudo cp ./flume-env.sh.template ./flume-env.sh
	sudo gedit ./flume-env.sh
	export JAVA_HOME=/usr/java/jdk1.8.0
</code></pre>
<h2 id="4-写hbase-sink-aysnconf用于执行flume写入hbase">4. 写hbase-sink-aysn.conf,用于执行flume写入hbase</h2>
<p>gedit /home/hadoop/flume/conf/hbase-sink-aysn.conf</p>
<p>将以下复制：</p>
<pre><code># Name the components on this agent
a1.sources = r1
a1.sinks = k1
a1.channels = c1

# Describe/configure the source
a1.sources.r1.type = syslogtcp
a1.sources.r1.bind = master
a1.sources.r1.port = 44444
a1.sources.r1.eventSize = 1000

# Describe the sink
a1.sinks.k1.type = asynchbase
a1.sinks.k1.table = student
a1.sinks.k1.columnFamily = information
a1.sinks.k1.serializer.payloadColumn=id,name,age,
a1.sinks.k1.batchSize = 10
a1.sinks.k1.serializer = org.apache.flume.sink.hbase.AsyncHbaseEventSerializer

a1.channels.c1.type = memory
a1.channels.c1.capacity = 1000
a1.channels.c1.transactionCapacity = 100

# Bind the source and sink to the channel
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1
</code></pre>
<h2 id="5-启动flume服务">5. 启动flume服务</h2>
<p>flume-ng agent -c conf -f tcp_hbase.conf -n a1 -Dflume.root.logger=INFO,console --conf = conf</p>
<p>查看写入的数据文件hadoop fs -ls /flume<br>
打开数据文件hadoop fs -cat /flume/master.1531133606859</p>
<h1 id="6-安装spark">6. 安装spark</h1>
<p>安装spark之前需要先安装scala</p>
<ol>
<li>scala安装<br>
<strong>解压</strong><br>
到/home/hadoop/app  : tar -zxvf scala-2.12.6.tgz -C /home/admin/app将scala-2.12.6重命名为scala<br>
<strong>配置环境变量:</strong></li>
</ol>
<pre><code>export SCALA_HOME=/home/admin/app/scala   
export PATH=$PATH:$SCALA_HOME/bin
</code></pre>
<p><strong>测试是否安装成功:scala -version</strong><br>
2. 安装spark</p>
<h2 id="1-解压">1.  解压</h2>
<p>到/home/hadoop/app  :<br>
tar -zxvf spark-2.3.1-bin-hadoop2.7.tgz -C /home/admin/app<br>
将 spark-2.3.1-bin-hadoop2.7重命名为spark</p>
<h2 id="2-配置环境变量-4">2.  配置环境变量:</h2>
<p>export SPARK_HOME=/home/admin/app/spark<br>
export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>A</mi><mi>T</mi><mi>H</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">PATH:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>SPARK_HOME/sbin:$SPARK_HOME/bin</p>
<h2 id="3-配置sparkconfspark-envsh文件">3.  配置/spark/conf/spark-env.sh文件</h2>
<pre><code>export JAVA_HOME=/usr/local/jdk1.8.0 
export HADOOP_HOME=/home/hadoop/app/hadoop 
export SCALA_HOME=/home/hadoop/app/scala 
export HBASE_HOME=/home/hadoop/app/hbase 
export HADOOP_CONF_DIR=/home/hadoop/app/hadoop/etc/hadoop 
export SPARK_MASTER_HOST=master 
export SPARK_MASTER_PORT=7077 
export SPARK_MASTER_WEBUI_PORT=7078 
export SPARK_WORKER_MEMORY=30G 
export LD_LIBRARY_PATH=$HADOOP_HOME/lib/native
</code></pre>
<h2 id="4-cp-spark-envshtemplate-spark-envsh">4. cp spark-env.sh.template spark-env.sh</h2>
<p>加入spark.master                     spark://master:8040</p>
<h2 id="5-cp-slavestemplate-slaves">5. cp slaves.template slaves</h2>
<p>加入<br>
master<br>
slave1<br>
slave2</p>
<h2 id="6-启动spark集群-start-allsh-stop-allsh">6. 启动spark集群: start-all.sh   stop-all.sh</h2>
<h2 id="7-spark提交任务">7. spark提交任务</h2>
<pre><code>./bin/spark-submit --class com.spark.kafkaConsumer.SparkFromKafka --master spark://master:7077 --executor-memory 8G --total-executor-cores 8 /home/hadoop/workspace/KafkaConsumer/target/KafkaConsumer-0.0.1-SNAPSHOT-jar-with-dependencies.jar			
</code></pre>
<p>spark-shell --master yarn<br>
nmap -p 7077 master_ip</p>
<h1 id="7安装redis-4011">7.安装redis-4.0.11</h1>
<p>192.168.1.100   7001    7004<br>
192.168.1.101  7002    7005<br>
192.168.1.102  7003    7006</p>
<h2 id="1-解压-2">1. 解压</h2>
<p>到/home/hadoop/app :tar -zxvf redis-4.0.11.tar.gz -C /home/admin/app<br>
重命名为redis</p>
<p>编译:make &amp;&amp; make install</p>
<h2 id="2-配置redis集群">2. 配置redis集群：</h2>
<p>在redis/目录下：<br>
mkdir -p redis-cluster/{7001,7004}<br>
cp redis.conf redis-cluster/7001/redis-7001.conf<br>
cp redis.conf redis-cluster/7004/redis-7004.conf<br>
修改：<br>
bind 192.168.1.100<br>
port 7001<br>
daemonize yes （redis后台运行）<br>
cluster-enabled yes（启动集群模式）<br>
appendonly yes (开启自动持久化)<br>
dir /home/admin/app/redis/redis-cluster/7001/data  (data存放目录)<br>
logfile /home/admin/app/redis/redis-cluster/7001/log/redis-7001.log<br>
pidfile /var/run/redis_7001.pid （pid 7001和port要对应）<br>
cluster-config-file nodes-7001.conf<br>
cluster-node-timeout 15000</p>
<h2 id="3-指定配置文件启动">3. 指定配置文件启动:</h2>
<p>cd redis/src    ./redis-server ../reids.conf</p>
<h2 id="4集群搭建">4.集群搭建</h2>
<p>每台机子上都按上述步骤安装redis</p>
<h2 id="5-配置步骤参照httpswwwcnblogscomding2016p7892542html">5. 配置步骤参照https://www.cnblogs.com/ding2016/p/7892542.html</h2>
<h2 id="6-删除某文件夹下所有文件">6. 删除某文件夹下所有文件:</h2>
<p>rm -r app/redis/redis-cluster/7002/data/*<br>
rm -r app/redis/redis-cluster/7002/log/*</p>
<h2 id="7-启动集群-redis">7. 启动集群: redis/</h2>
<h2 id="8-启动六个节点的服务">8. 启动六个节点的服务:</h2>
<pre><code>master:
src/redis-server redis-cluster/7001/redis-7001.conf
app/redis/src/redis-server app/redis/redis-cluster/7004/redis-7004.conf
slave1: 
app/redis/src/redis-server app/redis/redis-cluster/7002/redis-7002.conf
app/redis/src/redis-server app/redis/redis-cluster/7005/redis-7005.conf
slave2:
app/redis/src/redis-server app/redis/redis-cluster/7003/redis-7003.conf
app/redis/src/redis-server app/redis/redis-cluster/7006/redis-7006.conf
</code></pre>
<h2 id="9-查看服务是否启动-ps-ef-grep-redis">9. 查看服务是否启动:  ps -ef | grep redis</h2>
<h2 id="10-进入redis目录启动集群">10. 进入redis目录启动集群  ;</h2>
<pre><code>src/redis-trib.rb create --replicas 1 192.168.1.100:7001 192.168.1.101:7002 192.168.1.102:7003 192.168.1.100:7004 192.168.1.101:7005 192.168.1.102:7006

src/redis-trib.rb create --replicas 1 110.1.1.1:7001 110.1.1.101:7002 110.1.1.102:7003 110.1.1.1:7004 110.1.1.101:7005 110.1.1.102:7006
</code></pre>
<h2 id="11-进入客户端">11. 进入客户端</h2>
<p>./src/redis-cli -c  -h 192.168.1.100 -p 7001<br>
查看redis的延迟数据:   Redis-cli --latency -h 127.0.0.1 -p 6379</p>
<p>7.5重启后报错:Node 192.168.1.101:7001 is not empty. Either the node already knows other no<br>
ps -ef | grep redis ,<br>
kill 掉6个redis进程,删除reids/redis-cluster/7001/data中的所有文件<br>
重新启动所有服务</p>
<p>新增结点:src/redis-trib.rb add-node 192.168.1.100:7007 192.168.1.100:7001</p>
<h2 id="12-常见redis命令">12. 常见redis命令</h2>
<p>集群<br>
cluster info 打印集群的信息<br>
cluster nodes 列出集群当前已知的所有节点（node），以及这些节点的相关信息。<br>
节点<br>
cluster meet <ip> <port> 将ip和port所指定的节点添加到集群当中，让它成为集群的一份子。<br>
cluster forget &lt;node_id&gt; 从集群中移除 node_id 指定的节点。<br>
cluster replicate &lt;node_id&gt; 将当前节点设置为node_id指定的节点的从节点。<br>
cluster saveconfig 将节点的配置文件保存到硬盘里面。<br>
槽(slot)<br>
cluster addslots <slot> [slot ...] 将一个或多个槽（slot）指派（assign）给当前节点。<br>
cluster delslots <slot> [slot ...] 移除一个或多个槽对当前节点的指派。<br>
cluster flushslots 移除指派给当前节点的所有槽，让当前节点变成一个没有指派任何槽的节点。<br>
cluster setslot <slot> node &lt;node_id&gt; 将槽 slot 指派给 node_id 指定的节点，如果槽已经指派给另一个节点，那么先让另一个节点删除该槽&gt;，然后再进行指派。<br>
cluster setslot <slot> migrating &lt;node_id&gt; 将本节点的槽 slot 迁移到 node_id 指定的节点中。<br>
cluster setslot <slot> importing &lt;node_id&gt; 从 node_id 指定的节点中导入槽 slot 到本节点。<br>
cluster setslot <slot> stable 取消对槽 slot 的导入（import）或者迁移（migrate）。<br>
键<br>
cluster keyslot <key> 计算键 key 应该被放置在哪个槽上。<br>
cluster countkeysinslot <slot> 返回槽 slot 目前包含的键值对数量。<br>
cluster getkeysinslot <slot> <count> 返回 count 个 slot 槽中的键。</p>
<h2 id="13-redis数据备份及回复">13. redis数据备份及回复</h2>
<ol>
<li>dump.rdb 方式<br>
安装数据解析工具执行命令:<br>
easy_install pip<br>
install rdbtools<br>
将rdb文件转为json文件<br>
rdb --command json redis-cluster/7001/data/dump.rdb&gt;redis-cluster/7001/data/dump.json</li>
</ol>
<h1 id="8-kafka集群安装配置">8 .kafka集群安装配置</h1>
<p>①解压到指定文件夹 tar -zxvf  下载/kafka_2.12-2.0.0.tgz -C /home/admin/app/</p>
<p>②修改配置文件 kafka/config/server.properties</p>
<pre><code>broker.id=0
listeners=PLAINTEXT://master:9092
advertised.listeners=PLAINTEXT://master:9092
log.dirs=/home/admin/app/kafka/kafka-logs
zookeeper.connect=master:2181,slave1:2181,slave2:2181
</code></pre>
<p>③讲kafka文件发送到slave1和slave2</p>
<pre><code>scp -r kafka admin@slave1:/home/admin/app/
scp -r kafka admin@slave2:/home/admin/app/
</code></pre>
<p>④修改slave1中的配置文件kafka/config/server.properties</p>
<pre><code>broker.id=1
listeners=PLAINTEXT://slave1:9092
advertised.listeners=PLAINTEXT://slave1:9092
log.dirs=/home/hadoop/app/kafka/kafka-logs
zookeeper.connect=master:2181,slave1:2181,slave2:2181
</code></pre>
<p>⑤修改slave2中的配置文件kafka/config/server.properties</p>
<pre><code>broker.id=2
listeners=PLAINTEXT://slave2:
advertised.listeners=PLAINTEXT://slave2:9092
log.dirs=/home/hadoop/app/kafka/kafka-logs
zookeeper.connect=master:2181,slave1:2181,slave2:2181
</code></pre>
<p>⑥测试<br>
在每个节点启动kafka服务: bin/kafka-server-start.sh -daemon config/server.properties &amp;<br>
后台启动:bin/kafka-server-start.sh config/server.properties 1&gt;/dev/null 2&gt;&amp;1 &amp;<br>
1创建topic:    ./bin/kafka-topics.sh --create --zookeeper master:2181,slave1:2181,slave2:2181 --replication-factor 2 --partitions 1 --topic topic1<br>
2生产者bin/kafka-console-producer.sh --broker-list slave1:9092 --topic topic6<br>
3消费者bin/kafka-console-consumer.sh --bootstrap-server master:9092 --topic topic6 –from-beginning<br>
4查看所有topic: ./bin/kafka-topics.sh --list --zookeeper master:2181<br>
5查看某topic详细信息: bin/kafka-topics.sh --describe --zookeeper master:2181 --topic topic1<br>
6 查看所有topic详细信息: bin/kafka-topics.sh --describe --zookeeper master:2181<br>
7删除topic :bin/kafka-topics.sh --delete --zookeeper master:2181 --topic topic1<br>
8停止kafka服务:bin/kafka-server-stop.sh<br>
9错误记录: kafka进程启动后一会儿自动挂掉,修改/kafka/kafka-logs/meta.properties中的broker.id与server.properties中的broker.id一致<br>
10错误记录: KafkaConsumer is not safe for multi-threaded access<br>
KafkaConsumer是非线程安全的类，当使用多个线程操作同一个KafkaConsumer对象时就会引起这个错误。</p>
<p>PartitionCount：分区个数<br>
??ReplicationFactor：副本个数<br>
??Partition：分区<br>
??Leader：负责处理消息的读和写，leader是从所有节点中随机选择的.当前partition起作用的breaker.id<br>
??Replicas: 列出了所有的副本节点，不管节点是否在服务中.<br>
??Isr：是正在服务中的节点.</p>
<h1 id="9spark-streaming-接收kafka通道数据流">9.spark streaming 接收kafka通道数据流</h1>
<p>②集群<br>
./bin/spark-submit --class edu.wuli.gqzx.kafkaConsumer.SparkFromKafka --master spark://master:7077 --executor-memory 8G --total-executor-cores 30 /home/admin/workspace/workspace2/KafkaConsumer/target/KafkaConsumer-0.0.1-SNAPSHOT-jar-with-dependencies.jar</p>
<h1 id="10spark数据处理记录">10.spark数据处理记录</h1>
<p>①map函数与flatmap函数<br>
map函数:       顾名思义，将一个函数传入map中，然后利用传入的这个函数，将集合中的每个元素处理，并将处理后的结果返回。<br>
flatMap函数:      flatMap与map唯一不一样的地方就是传入的函数在处理完后返回值必须是List，其实这也不难理解，既然是flatMap，那除了map以外必然还有flat的操作，所以需要返回值是List才能执行flat这一步.</p>
<h1 id="11redis优化记录">11.redis优化记录</h1>
<p>redis-7001.conf文件:<br>
maxmemory 68719476736   #559<br>
maxmemory-policy volatile-ttl   #590<br>
cluster-require-full-coverage no    #905</p>
<p>1） 在Redis配置文件中(一般叫Redis.conf)，通过设置“maxmemory”属性的值可以限制Redis最大使用的内存若是启用了Redis快照功能，应该设置“maxmemory”值为系统可使用内存的45%，因为快照时需要一倍的内存来复制整个数据集，也就是说如果当前已使用45%，在快照期间会变成95%(45%+45%+5%)，其中5%是预留给其他的开销。 如果没开启快照功能，maxmemory最高能设置为系统可用内存的95%。<br>
2)  当内存使用达到设置的最大阀值时，需要选择一种key的回收策略，可在Redis.conf配置文件中修改“maxmemory-policy”属性值。 若是Redis数据集中的key都设置了过期时间，那么“volatile-ttl”策略是比较好的选择。但如果key在达到最大内存限制时没能够迅速过期，或者根本没有设置过期时间。那么设置为“allkeys-lru”值比较合适，它允许Redis从整个数据集中挑选最近最少使用的key进行删除(LRU淘汰算法)。Redis还提供了一些其他淘汰策略，如下：<br>
volatile-lru：使用LRU算法从已设置过期时间的数据集合中淘汰数据。<br>
volatile-ttl：从已设置过期时间的数据集合中挑选即将过期的数据淘汰。<br>
volatile-random：从已设置过期时间的数据集合中随机挑选数据淘汰。<br>
allkeys-lru：使用LRU算法从所有数据集合中淘汰数据。<br>
allkeys-random：从数据集合中任意选择数据淘汰<br>
no-enviction：禁止淘汰数据。<br>
3） 槽是否全覆盖：cluster-require-full-coverage no。默认是yes，只要有结点宕机导致16384个槽没全被覆盖，整个集群就全部停止服务，所以一定要改为no<br>
4） list-compress-depth 0<br>
设置: 列表也可能被压缩<br>
0:禁用所有列表压缩。<br>
1:depth 1的意思是“在1个节点进入列表后，从头部或尾部开始压缩”<br>
So:[head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]，[head],[tail]将始终未压缩；内部节点将压缩。<br>
2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]<br>
2在这里的意思是:不要压缩head或head-&gt;next或tail-&gt;prev或tail，而是压缩它们之间的所有节点。<br>
3:[head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]<br>
5) 内核参数 overcommit_memory 1<br>
有三种方式修改内核参数，但要有root权限：<br>
（1）编辑/etc/sysctl.conf ，改vm.overcommit_memory=1，然后sysctl -p 使配置文件生效<br>
（2）sysctl vm.overcommit_memory=1<br>
（3）echo 1 &gt; /proc/sys/vm/overcommit_memory<br>
建议使用方法 1<br>
它是 内存分配策略<br>
可选值：0、1、2。<br>
0， 表示内核将检查是否有足够的可用内存供应用进程使用；如果有足够的可用内存，内存申请允许；否则，内存申请失败，并把错误返回给应用进程。<br>
1， 表示内核允许分配所有的物理内存，而不管当前的内存状态如何。<br>
2， 表示内核允许分配超过所有物理内存和交换空间总和的内存</p>
<h1 id="12-hbase优化记录">12. hbase优化记录</h1>
<p>putlist大小<br>
2<em>524288000/74176<br>
2</em>524288000/60608</p>
<ol>
<li>hbase.ipc.server.callqueue.handler.factor<br>
指定调用队列的数量：<br>
0 意味着单个共享队列。<br>
1 意味着每个处理程序的一个队列。<br>
一个0和1之间的值，按处理程序的数量成比例地分配队列数。例如，0.5 的值在每个处理程序之间共享一个队列。<br>
2)使用 hbase.ipc.server.callqueue.read.ratio（hbase.ipc.server.callqueue.read.share在0.98中）将调用队列分成读写队列：<br>
0.5 意味着将有相同数量的读写队列。<br>
&lt;0.5 表示为读多于写。
<blockquote>
<p>0.5 表示写多于读</p>
</blockquote>
</li>
</ol>
<p>3)禁用 Nagle 的算法。延迟的 ACKs 可以增加到200毫秒的 RPC 往返时间。设置以下参数：<br>
在 Hadoop 的 core-site.xml 中：<br>
ipc.server.tcpnodelay = true<br>
ipc.client.tcpnodelay = true<br>
在 HBase 的 hbase-site.xml 中：<br>
hbase.ipc.client.tcpnodelay = true<br>
hbase.ipc.server.tcpnodelay = true</p>
<h1 id="13-操作系统优化">13. 操作系统优化</h1>
<pre><code> 1)修改linux打开文件数和进程数
sudo vim /etc/security/limits.conf  加入:
</code></pre>
<ul>
<li>soft nofile 102400</li>
<li>hard nofile 409600<br>
sudo vim /etc/security/limits.d/20-nproc.conf</li>
<li>soft nproc 409600</li>
<li>hard nproc 819200<br>
2）禁用透明大页面压缩<br>
root用户执行 echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag<br>
开机禁用:<br>
sudo vim /etc/rc.local<br>
echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</li>
</ul>

                        </div>
                        
                            <div class="post-toc">
                                <ul class="markdownIt-TOC">
<li><a href="#%E7%9B%AE%E5%BD%95">目录</a></li>
<li><a href="#1-%E5%AE%89%E8%A3%85hadoop-284">1、安装hadoop-2.8.4</a>
<ul>
<li><a href="#1-%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D">1、修改主机名</a></li>
<li><a href="#2-%E5%88%9B%E5%BB%BAhadoop%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84">2、创建hadoop用户和用户组</a></li>
<li><a href="#2-%E8%AE%BE%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95">2、设置SSH免密登录</a></li>
<li><a href="#3-%E5%AE%89%E8%A3%85jdk">3、安装jdk</a></li>
<li><a href="#4-%E7%94%A8hadoop%E7%94%A8%E6%88%B7%E8%BF%9B%E5%85%A5%E5%AE%89%E8%A3%85hadoop">4、用hadoop用户进入安装hadoop</a></li>
</ul>
</li>
<li><a href="#2-%E9%85%8D%E7%BD%AEzookeeper-354-beta">2、配置zookeeper-3.5.4-beta</a>
<ul>
<li><a href="#1-%E8%A7%A3%E5%8E%8Bcd-home-%E4%B8%8B%E8%BD%BD">1. 解压：cd /home /下载</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">2. 配置环境变量：</a></li>
<li><a href="#3-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">3. 修改配置文件</a></li>
<li><a href="#4-%E5%90%AF%E5%8A%A8zookeeper%E6%B3%A8%E6%84%8F%E8%A6%81%E6%8C%89%E7%85%A7myid%E5%A4%A7%E5%B0%8F%E9%A1%BA%E5%BA%8F%E6%9D%A5%E4%BE%9D%E6%AC%A1%E5%9C%A8%E4%B8%BB%E6%9C%BA%E4%B8%8A%E5%90%AF%E5%8A%A8">4. 启动zookeeper：注意要按照myid大小顺序来依次在主机上启动:</a></li>
</ul>
</li>
<li><a href="#3-%E5%AE%89%E8%A3%85hbase">3、安装hbase</a>
<ul>
<li><a href="#1-%E8%A7%A3%E5%8E%8Bcd-%E4%B8%8B%E8%BD%BD">1. 解压：cd /下载</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-2">2. 配置环境变量：</a></li>
<li><a href="#3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6sudo-gedit-hbaseconfhbase-envsh">3. 配置文件sudo gedit hbase/conf/hbase-env.sh</a></li>
<li><a href="#4-%E5%90%AF%E5%8A%A8hbase-start-hbasesh">4. 启动hbase:   start-hbase.sh</a></li>
<li><a href="#5-%E8%AE%BF%E9%97%AEweb%E9%A1%B5%E9%9D%A2httpmaster16010">5. 访问web页面:http://master:16010</a></li>
<li><a href="#6-%E8%AE%BE%E7%BD%AE%E5%A4%87%E7%94%A8hmaster-%E5%9C%A8hbaseconf%E4%B8%8B%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6backup-masters-%E6%B7%BB%E5%8A%A0slave1%E4%BD%9C%E4%B8%BA%E5%A4%87%E7%94%A8hmaster">6. 设置备用hmaster: 在hbase/conf下新建文件backup-masters ,添加slave1作为备用hmaster</a></li>
<li><a href="#7-hbase%E5%90%AF%E5%8A%A8%E9%94%99causedbyjavalangclassnotfoundexceptionorgapachehtracesamplerbuilder">7. hbase启动错:Causedby:java.lang.ClassNotFoundException:org.apache.htrace.SamplerBuilder</a></li>
</ul>
</li>
<li><a href="#4-hbase%E5%BB%BA%E5%BA%93%E5%BB%BA%E8%A1%A8">4、hbase建库建表</a>
<ul>
<li><a href="#1-%E5%BB%BA%E8%A1%A8">1. 建表</a></li>
<li><a href="#2-%E5%A2%9E">2. 增</a></li>
<li><a href="#3-%E5%88%A0">3. 删</a></li>
<li><a href="#4-%E6%9F%A5">4. 查</a></li>
<li><a href="#5-%E6%94%B9">5. 改</a></li>
<li><a href="#6-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4">6. 常用指令：</a></li>
</ul>
</li>
<li><a href="#5-%E5%AE%89%E8%A3%85flume">5. 安装flume</a>
<ul>
<li><a href="#1-%E8%A7%A3%E5%8E%8B-%E5%AE%89%E8%A3%85">1. 解压 安装</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-3">2. 配置环境变量</a></li>
<li><a href="#3-%E9%85%8D%E7%BD%AEflume-envsh">3. 配置flume-env.sh</a></li>
<li><a href="#4-%E5%86%99hbase-sink-aysnconf%E7%94%A8%E4%BA%8E%E6%89%A7%E8%A1%8Cflume%E5%86%99%E5%85%A5hbase">4. 写hbase-sink-aysn.conf,用于执行flume写入hbase</a></li>
<li><a href="#5-%E5%90%AF%E5%8A%A8flume%E6%9C%8D%E5%8A%A1">5. 启动flume服务</a></li>
</ul>
</li>
<li><a href="#6-%E5%AE%89%E8%A3%85spark">6. 安装spark</a>
<ul>
<li><a href="#1-%E8%A7%A3%E5%8E%8B">1.  解压</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-4">2.  配置环境变量:</a></li>
<li><a href="#3-%E9%85%8D%E7%BD%AEsparkconfspark-envsh%E6%96%87%E4%BB%B6">3.  配置/spark/conf/spark-env.sh文件</a></li>
<li><a href="#4-cp-spark-envshtemplate-spark-envsh">4. cp spark-env.sh.template spark-env.sh</a></li>
<li><a href="#5-cp-slavestemplate-slaves">5. cp slaves.template slaves</a></li>
<li><a href="#6-%E5%90%AF%E5%8A%A8spark%E9%9B%86%E7%BE%A4-start-allsh-stop-allsh">6. 启动spark集群: start-all.sh   stop-all.sh</a></li>
<li><a href="#7-spark%E6%8F%90%E4%BA%A4%E4%BB%BB%E5%8A%A1">7. spark提交任务</a></li>
</ul>
</li>
<li><a href="#7%E5%AE%89%E8%A3%85redis-4011">7.安装redis-4.0.11</a>
<ul>
<li><a href="#1-%E8%A7%A3%E5%8E%8B-2">1. 解压</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AEredis%E9%9B%86%E7%BE%A4">2. 配置redis集群：</a></li>
<li><a href="#3-%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%AF%E5%8A%A8">3. 指定配置文件启动:</a></li>
<li><a href="#4%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA">4.集群搭建</a></li>
<li><a href="#5-%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%E5%8F%82%E7%85%A7httpswwwcnblogscomding2016p7892542html">5. 配置步骤参照https://www.cnblogs.com/ding2016/p/7892542.html</a></li>
<li><a href="#6-%E5%88%A0%E9%99%A4%E6%9F%90%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6">6. 删除某文件夹下所有文件:</a></li>
<li><a href="#7-%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4-redis">7. 启动集群: redis/</a></li>
<li><a href="#8-%E5%90%AF%E5%8A%A8%E5%85%AD%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E6%9C%8D%E5%8A%A1">8. 启动六个节点的服务:</a></li>
<li><a href="#9-%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E5%90%AF%E5%8A%A8-ps-ef-grep-redis">9. 查看服务是否启动:  ps -ef | grep redis</a></li>
<li><a href="#10-%E8%BF%9B%E5%85%A5redis%E7%9B%AE%E5%BD%95%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4">10. 进入redis目录启动集群  ;</a></li>
<li><a href="#11-%E8%BF%9B%E5%85%A5%E5%AE%A2%E6%88%B7%E7%AB%AF">11. 进入客户端</a></li>
<li><a href="#12-%E5%B8%B8%E8%A7%81redis%E5%91%BD%E4%BB%A4">12. 常见redis命令</a></li>
<li><a href="#13-redis%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E5%8F%8A%E5%9B%9E%E5%A4%8D">13. redis数据备份及回复</a></li>
</ul>
</li>
<li><a href="#8-kafka%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">8 .kafka集群安装配置</a></li>
<li><a href="#9spark-streaming-%E6%8E%A5%E6%94%B6kafka%E9%80%9A%E9%81%93%E6%95%B0%E6%8D%AE%E6%B5%81">9.spark streaming 接收kafka通道数据流</a></li>
<li><a href="#10spark%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95">10.spark数据处理记录</a></li>
<li><a href="#11redis%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%95">11.redis优化记录</a></li>
<li><a href="#12-hbase%E4%BC%98%E5%8C%96%E8%AE%B0%E5%BD%95">12. hbase优化记录</a></li>
<li><a href="#13-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96">13. 操作系统优化</a></li>
</ul>

                            </div>
                            
                                
                                    
                                            <!--zh-->
                                            <section class="post-copyright zh">
                                                <p class="copyright-item ">
                                                    <span>&#x4F5C;&#x8005;:</span>
                                                    <span>kily007</span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x94FE;&#x63A5;:</span>
                                                    <span><a href="https://kily-007.github.io/post/笔记-集群搭建记录/">https://kily-007.github.io/post/笔记-集群搭建记录/</a></span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x534F;&#x8BAE;:</span>
                                                    <span>MIT License</span>
                                                </p>
                                            </section>
                                            
                                                
                                                    
                                                                    <!--Share-->
                                                                    <span style="margin-right:15px">
                        <i class="post-share"></i>
                        <span>&#x5206;&#x4EAB;:</span>
                                                                    <a title="QR 码" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://kily-007.github.io/post/笔记-集群搭建记录/"><i class="fa fa-qrcode"></i></a>
                                                                    <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://kily-007.github.io/post/笔记-集群搭建记录/&sharesource=qzone&title=集群搭建记录&pics=https://kily-007.github.io//images/avatar.png?v=1592817813598&summary="><i class="fa fa-qq"></i></a>
                                                                    <a title="新浪微博" target="_blank" href="https://service.weibo.com/share/share.php?url=https://kily-007.github.io/post/笔记-集群搭建记录/&sharesource=weibo&title=集群搭建记录 + " - " + &pic="https://kily-007.github.io//images/avatar.png?v=1592817813598 "><i class="fa fa-weibo "></i></a>

                                                                    </span>
                                                                    
                                                                        <div class="reward ">
                                                                            <div class="reward-button ">&yen;
                                                                                <span class="reward-code "> 
                        <span class="alipay-code "> <img class="alipay-img " alt = "support " src="https://i.loli.net/2020/06/08/xmUPJGuqCsaQgAc.jpg"><b>支付宝</b> </span>
                                                                                <span class="wechat-code "> <img alt ="support " class="wechat-img " src="https://i.loli.net/2020/06/08/VJIWfRMPDpwKGlo.jpg"><b>微信</b> </span> </span>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                            <!--zh-->
                                                                            <section class="post-tags zh ">
                                                                                <div>
                                                                                    <span>&#x6807;&#x7B7E;:</span>
                                                                                    <span class="tag ">
                        
                        
                        <a href="https://kily-007.github.io/tag/大数据/">#
                    大数据
                        </a>
                        
                        <a href="https://kily-007.github.io/tag/笔记/">#
                    笔记
                        </a>
                        
                        <a href="https://kily-007.github.io/tag/WgTHgP4UwG/">#
                    linux
                        </a>
                        
                            
                                </span>
                                                                                </div>
                                                                                <div>
                                                                                    <a href="javascript:window.history.back();">
                        &#x8FD4;&#x56DE;</a>
                                                                                    <span>&dot;</span>
                                                                                    <a href="#">&#x4E3B;&#x9875;</a>
                                                                                </div>
                                                                            </section>

                                                                            
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                        <a class="prev" rel="prev" href="https://kily-007.github.io/post/面经-瓜子二手车面经-大数据岗/">
                                                                                            瓜子二手车面经-大数据岗
                                                                                        </a>
                                                                                        
                                                                                            
                                                                                                <a class="next" rel="next" href="https://kily-007.github.io/post/笔记-java中的锁/">
                                                                                                    笔记-java中的锁
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                                            
                                                <script src="https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js"></script>

<style>
	#vcomments{
		width: 100%;
		max-width: 885px;
		padding: 3.5%;
		margin: 0 auto
	}
	#veditor {
		background-image: url(https://cdn.jsdelivr.net/gh/drew233/cdn/20200409110727.webp);
		background-size: contain;
		background-repeat: no-repeat;
		background-position: right;
		background-color: rgba(255, 255, 255, 0);
		resize: vertical
	}
	#vcomments .vcards .vcard {
		padding: 15px 20px 0 20px;
		border-radius: 10px;
		margin-bottom: 15px;
		box-shadow: 0 0 4px 1px rgba(0, 0, 0, .12);
		transition: all .3s
	}
	 
	#vcomments .vcards .vcard:hover {
		box-shadow: 0 0 8px 3px rgba(0, 0, 0, .12)
	}
	 
	#vcomments .vcards .vcard .vh .vcard {
		border: none;
		box-shadow: none;
	}
	img.vimg:hover {
	     transform: rotate(360deg);
	     -webkit-transform: rotate(360deg);
	     -moz-transform: rotate(360deg);
	     -o-transform: rotate(360deg);
	     -ms-transform: rotate(360deg);
	}
</style>


<div id="vcomments"></div>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'OVKyeagFOYYOdHhJ9o8IlG8F-MdYXbMMI',
        appKey: 'di3dFnzxMfpcwn8BBlVzR6u7',
        pageSize: 10,
        avatar: 'mp',
        placeholder: '来都来了，不妨评论一下',
        visitor: true,
        highlight: true,
        recordIP: true,
		tagMeta: ["博主","好友","访客"],
		master: '7e3f9cfbe88820b9f4ae2e4857e69e26',
		friends: ["48c8f1e79dd340e4b247820fee013082"],
		visitor: true,
		enableQQ: true,
		emojiCDN: 'https://cdn.jsdelivr.net/gh/Sanarous/files@1.17/emojis/',
		emojiMaps: {
		        "huaji":"oldtieba/滑稽.png","yinxian":"oldtieba/阴险.png","tushe":"oldtieba/吐舌.png","huaxin":"oldtieba/花心.png","shengqi":"oldtieba/生气.png","zhenbang":"oldtieba/真棒.png","xiaoyan":"oldtieba/笑眼.png","kaixin":"oldtieba/开心.png",
		                                "jingku":"oldtieba/惊哭.png","ku":"oldtieba/酷.png","kuanghan":"oldtieba/狂汗.png","lei":"oldtieba/泪.png","jingya":"oldtieba/惊讶.png","tu":"oldtieba/吐.png","yi":"oldtieba/咦.png","yiwen":"oldtieba/疑问.png","leng":"oldtieba/冷.png","mianqiang":"oldtieba/勉强.png",
		                                 "qian":"oldtieba/钱.png","qianbi":"oldtieba/钱币.png","nu":"oldtieba/怒.png","pen":"oldtieba/喷.png","shuijiao":"oldtieba/睡觉.png","taikaixin":"oldtieba/太开心.png","weiqu":"oldtieba/委屈.png","zhenbang":"oldtieba/真棒.png","meigui":"oldtieba/玫瑰.png","shengli":"oldtieba/胜利.png",
		                                 "qq_1":"qq/呲牙.gif","qq_2":"qq/大哭.gif","qq_3":"qq/得意.gif","qq_4":"qq/发呆.gif","qq_5":"qq/尴尬.gif","qq_6":"qq/鼓掌.gif","qq_7":"qq/哈欠.gif","qq_8":"qq/憨笑.gif","qq_9":"qq/害羞.gif","qq_10":"qq/坏笑.gif","qq_11":"qq/饥饿.gif","qq_12":"qq/惊恐.gif","qq_13":"qq/惊讶.gif",
		                                 "qq_14":"qq/可爱.gif","qq_15":"qq/可怜.gif","qq_16":"qq/抠鼻.gif","qq_17":"qq/酷.gif","qq_18":"qq/快哭了.gif","qq_19":"qq/困.gif","qq_20":"qq/冷汗.gif",
		                                 "qq_21":"qq/流汗.gif","qq_22":"qq/流泪.gif","qq_23":"qq/难过.gif","qq_24":"qq/撇嘴.gif","qq_25":"qq/亲亲.gif","qq_26":"qq/睡.gif","qq_27":"qq/调皮.gif","qq_28":"qq/太阳.gif","qq_29":"qq/偷笑.gif","qq_30":"qq/偷笑.gif",
		                                 "qq_31":"qq/吐.gif","qq_32":"qq/偷笑.gif","qq_33":"qq/吐.gif","qq_34":"qq/微笑.gif","qq_35":"qq/委屈.gif","qq_36":"qq/吓.gif","qq_37":"qq/嗅大了.gif","qq_38":"qq/嘘.gif","qq_39":"qq/疑问.gif","qq_40":"qq/阴险.gif",
		                                 "qq_41":"qq/右哼哼.gif","qq_42":"qq/晕.gif","qq_43":"qq/再见.gif","qq_44":"qq/折磨.gif","qq_45":"qq/咒骂.gif","qq_46":"qq/猪头.gif","qq_47":"qq/抓狂.gif","qq_48":"qq/左哼哼.gif","qq_49":"qq/握手.gif","qq_50":"qq/强.gif","qq_51":"qq/胜利.gif",
		                                "sina_1": "sina/sina_1.png", "sina_2": "sina/sina_2.png", "sina_3": "sina/sina_3.png", "sina_4": "sina/sina_4.png", "sina_5": "sina/sina_5.png", "sina_6": "sina/sina_6.png",
		                                "sina_7": "sina/sina_7.png", "sina_8": "sina/sina_8.png", "sina_9": "sina/sina_9.png", "sina_10": "sina/sina_10.png", "sina_11": "sina/sina_11.png", "sina_12": "sina/sina_12.png", "sina_13": "sina/sina_13.png",
		                                "sina_14": "sina/sina_14.png", "sina_15": "sina/sina_15.png", "sina_16": "sina/sina_16.png", "sina_17": "sina/sina_17.png", "sina_18": "sina/sina_18.png", "sina_19": "sina/sina_19.png",
		                                "sina_20": "sina/sina_20.png", "sina_21": "sina/sina_21.png", "sina_22": "sina/sina_22.png", "sina_23": "sina/sina_23.png", "sina_24": "sina/sina_24.png", "sina_25": "sina/sina_25.png",
		                                "sina_26": "sina/sina_26.png", "sina_27": "sina/sina_27.png", "sina_28": "sina/sina_28.png", "sina_29": "sina/sina_29.png", "sina_30": "sina/sina_30.png", "sina_31": "sina/sina_31.png",
		                                "sina_32": "sina/sina_32.png", "sina_33": "sina/sina_33.png", "sina_34": "sina/sina_34.png", "sina_35": "sina/sina_35.png", "sina_36": "sina/sina_36.png", "sina_37": "sina/sina_37.png",
		                                "sina_38": "sina/sina_38.png", "sina_39": "sina/sina_39.png", "sina_40": "sina/sina_40.png", "sina_41": "sina/sina_41.png", "sina_42": "sina/sina_42.png", "sina_43": "sina/sina_43.png",
		                                "sina_44": "sina/sina_44.png", "sina_45": "sina/sina_45.png",
		                                "bili_1":"bilibili/bili_1.png", "bili_2":"bilibili/bili_2.png", "bili_3":"bilibili/bili_3.png", "bili_4":"bilibili/bili_4.png", "bili_5":"bilibili/bili_5.png", "bili_6":"bilibili/bili_6.png",
		                                "bili_7":"bilibili/bili_7.png", "bili_8":"bilibili/bili_8.png", "bili_9":"bilibili/bili_9.png", "bili_10":"bilibili/bili_10.png", "bili_11":"bilibili/bili_11.png", "bili_12":"bilibili/bili_12.png",
		                                "bili_13":"bilibili/bili_13.png", "bili_14":"bilibili/bili_14.png", "bili_15":"bilibili/bili_15.png", "bili_16":"bilibili/bili_16.png", "bili_17":"bilibili/bili_17.png", "bili_18":"bilibili/bili_18.png",
		                                "bili_19":"bilibili/bili_19.png", "bili_20":"bilibili/bili_20.png", "bili_21":"bilibili/bili_21.png", "bili_22":"bilibili/bili_22.png", "bili_23":"bilibili/bili_23.png", "bili_24":"bilibili/bili_24.png",
		                                "bili_25":"bilibili/bili_25.png", "bili_26":"bilibili/bili_26.png", "bili_27":"bilibili/bili_27.png", "bili_28":"bilibili/bili_28.png", "bili_29":"bilibili/bili_29.png", "bili_30":"bilibili/bili_30.png",
		                                "bili_31":"bilibili/bili_31.png", "bili_32":"bilibili/bili_32.png", "bili_33":"bilibili/bili_33.png", "bili_34":"bilibili/bili_34.png", "bili_35":"bilibili/bili_35.png", "bili_36":"bilibili/bili_36.png",
		                                "bili_37":"bilibili/bili_37.png", "bili_38":"bilibili/bili_38.png", "bili_39":"bilibili/bili_39.png", "bili_40":"bilibili/bili_40.png", "bili_41":"bilibili/bili_41.png", "bili_42":"bilibili/bili_42.png",
		                                "bili_43":"bilibili/bili_43.png", "bili_44":"bilibili/bili_44.png", "bili_45":"bilibili/bili_45.png", "bili_46":"bilibili/bili_46.png", "bili_47":"bilibili/bili_47.png", "bili_48":"bilibili/bili_48.png",
		                                "bili_49":"bilibili/bili_49.png", "bili_50":"bilibili/bili_50.png",
		                                "kt_1":"aru/1.png","kt_2":"aru/2.png","kt_3":"aru/3.png","kt_4":"aru/4.png","kt_5":"aru/5.png","kt_6":"aru/6.png","kt_7":"aru/7.png","kt_8":"aru/8.png","kt_9":"aru/9.png","kt_10":"aru/10.png","kt_11":"aru/11.png",
		        						"kt_12":"aru/12.png","kt_13":"aru/13.png","kt_14":"aru/14.png","kt_15":"aru/15.png","kt_16":"aru/16.png","kt_17":"aru/17.png","kt_18":"aru/18.png","kt_19":"aru/19.png","kt_20":"aru/20.png","kt_21":"aru/21.png","kt_22":"aru/22.png",
		        						"kt_23":"aru/23.png","kt_24":"aru/24.png","kt_25":"aru/25.png","kt_26":"aru/26.png","kt_27":"aru/27.png","kt_28":"aru/28.png","kt_29":"aru/29.png","kt_30":"aru/30.png","kt_31":"aru/31.png","kt_32":"aru/32.png","kt_33":"aru/33.png",
		        						"kt_34":"aru/34.png","kt_35":"aru/35.png","kt_36":"aru/36.png","kt_37":"aru/37.png","kt_38":"aru/38.png","kt_39":"aru/39.png","kt_40":"aru/40.png","kt_41":"aru/41.png","kt_42":"aru/42.png","kt_43":"aru/43.png","kt_44":"aru/44.png",
		        						"kt_45":"aru/45.png","kt_46":"aru/46.png","kt_47":"aru/47.png","kt_48":"aru/48.png","kt_49":"aru/49.png","kt_50":"aru/50.png","kt_51":"aru/51.png","kt_52":"aru/52.png","kt_53":"aru/53.png","kt_54":"aru/54.png","kt_55":"aru/55.png","kt_56":"aru/56.png",
		                                "kt_57":"aru/57.png", "kt_58":"aru/58.png", "kt_59":"aru/59.png", "kt_60":"aru/60.png", "kt_61":"aru/61.png", "kt_62":"aru/62.png", "kt_63":"aru/63.png", "kt_64":"aru/64.png", "kt_65":"aru/65.png", "kt_66":"aru/66.png",
		                                "kt_67":"aru/67.png", "kt_68":"aru/68.png", "kt_69":"aru/69.png", "kt_70":"aru/70.png", "kt_71":"aru/71.png", "kt_72":"aru/72.png", "kt_73":"aru/73.png", "kt_74":"aru/74.png", "kt_75":"aru/75.png", "kt_76":"aru/76.png",
		                                "kt_77":"aru/77.png", "kt_78":"aru/78.png", "kt_79":"aru/79.png", "kt_80":"aru/80.png", "kt_81":"aru/81.png", "kt_82":"aru/82.png", "kt_83":"aru/83.png", "kt_84":"aru/84.png", "kt_85":"aru/85.png", "kt_86":"aru/86.png",
		                                "kt_87":"aru/87.png", "kt_88":"aru/88.png", "kt_89":"aru/89.png", "kt_90":"aru/90.png", "kt_91":"aru/91.png", "kt_92":"aru/92.png", "kt_93":"aru/93.png", "kt_94":"aru/94.png", "kt_95":"aru/95.png", "kt_96":"aru/96.png",
		                                "kt_97":"aru/97.png", "kt_98":"aru/98.png", "kt_99":"aru/99.png", "kt_100":"aru/100.png", "kt_101":"aru/101.png", "kt_102":"aru/102.png", "kt_103":"aru/103.png", "kt_104":"aru/104.png", "kt_105":"aru/105.png",
		                                "kt_106":"aru/106.png", "kt_107":"aru/107.png", "kt_108":"aru/108.png", "kt_109":"aru/109.png", "kt_110":"aru/110.png", "kt_111":"aru/111.png", "kt_112":"aru/112.png", "kt_113":"aru/113.png", "kt_114":"aru/114.png",
		                                "kt_115":"aru/115.png","kt_116":"aru/116.png","kt_117":"aru/117.png","kt_118":"aru/118.png","kt_119":"aru/119.png","kt_120":"aru/120.png","kt_121":"aru/121.png","kt_122":"aru/122.png","kt_123":"aru/123.png","kt_124":"aru/124.png",
		                                "kt_125":"aru/125.png","kt_126":"aru/126.png","kt_127":"aru/127.png","kt_128":"aru/128.png","kt_129":"aru/129.png","kt_130":"aru/130.png","kt_131":"aru/131.png","kt_132":"aru/132.png","kt_133":"aru/133.png","kt_134":"aru/134.png",
		                                "kt_135":"aru/135.png","kt_136":"aru/136.png","kt_137":"aru/137.png","kt_138":"aru/138.png","kt_139":"aru/139.png","kt_140":"aru/140.png","kt_141":"aru/141.png","kt_142":"aru/142.png","kt_143":"aru/143.png","kt_144":"aru/144.png",
		                                "kt_145":"aru/145.png","kt_146":"aru/146.png","kt_147":"aru/147.png","kt_148":"aru/148.png","kt_149":"aru/149.png",
		                                "kt_150":"aru/150.png", "kt_151":"aru/151.png", "kt_152":"aru/152.png", "kt_153":"aru/153.png", "kt_154":"aru/154.png", "kt_155":"aru/155.png", "kt_156":"aru/156.png", "1kt_57":"aru/157.png", "kt_158":"aru/158.png",
		                                "kt_159":"aru/159.png", "kt_160":"aru/160.png", "kt_161":"aru/161.png", "kt_162":"aru/162.png", "kt_163":"aru/163.png", "kt_164":"aru/164.png",
		        
		    }
    });
	if(window.location.hash){
		var checkExist = setInterval(function() {
		   if ($(window.location.hash).length) {
			  $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
			  clearInterval(checkExist);
		   }
		}, 100);
	}
</script>
                                                    
            </div>
    </div>
    </div>
    </div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                        
                            
                                <br/>
								<b id="hitokoto"></b><br>
                                
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
										<a href="https://kily-007.github.io/">
										    kily007
										</a>
										  &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="https://gridea.dev/" target="_blank">
                                                Gridea
                                            </a>
											 Themme by
											<a href="https://github.com/ITJoker233/Gridea-theme-Chic">
											    Chic
											</a>
											
											<br/>
											<span id="sitetime"></span>
											<br/>
											<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script
											<span id="busuanzi_container_page_pv">
												<svg t="1591939109081" class="icon" style="vertical-align: text-bottom;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2663" width="17" height="17" ><path d="M912 512.1c0 10.1-3 20.4-8.9 30.8-41.7 68.5-97.7 123.3-168.1 164.5-70.4 41.2-144.7 61.8-223 61.8s-152.6-20.7-223-62.1S162.6 611 120.9 542.8c-5.9-10.4-8.9-20.7-8.9-30.8 0-10.1 3-20.4 8.9-30.8C162.6 413 218.6 358.3 289 316.9s144.7-62.1 223-62.1 152.6 20.7 223 62.1S861.4 413 903.1 481.2c5.9 10.5 8.9 20.8 8.9 30.9z m-57.1 0c-45.3-70.2-102-122.8-170.1-157.7 18.1 31 27.2 64.4 27.2 100.5 0 55-19.5 102.2-58.7 141.3-39.2 39.2-86.2 58.7-141.3 58.7-55 0-102.2-19.5-141.3-58.7C331.5 557.1 312 510 312 454.9c0-36 9.1-69.5 27.2-100.5C271 389.2 214.3 441.7 169.1 512c39.6 61 89.2 109.6 148.9 145.7 59.6 36.2 124.3 54.3 194 54.3s134.3-18.1 194-54.3c59.6-36 109.3-84.6 148.9-145.6zM527.2 355.8c4.1-4.1 6.3-9.2 6.3-15.2 0-5.9-2.1-11-6.3-15.2-4.1-4.1-9.2-6.3-15.2-6.3-37.2 0-69.1 13.3-95.8 40-26.7 26.7-40 58.6-40 95.8 0 5.9 2.1 11 6.3 15.2 4.1 4.1 9.2 6.3 15.2 6.3 5.9 0 11-2.1 15.2-6.3 4.1-4.1 6.3-9.2 6.3-15.2 0-25.6 9.1-47.5 27.2-65.6 18.1-18.1 40-27.2 65.6-27.2 5.9-0.1 11-2.1 15.2-6.3z" p-id="2664"></path></svg>
												<span id="busuanzi_value_site_pv"></span>
											</span>
											|
											<span id="busuanzi_container_page_uv">
												<svg t="1591938881016" class="icon" style="vertical-align: text-bottom;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="801" width="17" height="17"><path d="M517.333333 490.666667a192 192 0 1 1 192-192 192 192 0 0 1-192 192z m0-341.333334a149.333333 149.333333 0 1 0 149.333334 149.333334 149.333333 149.333333 0 0 0-149.333334-149.333334z" p-id="802" fill="#2c2c2c"></path><path d="M837.333333 882.773333h-640v-21.333333c0-229.546667 143.573333-416 320-416s320 186.453333 320 416z m-597.333333-42.666666h554.666667c-8.32-196.053333-129.28-352-277.333334-352s-268.586667 155.946667-276.906666 352z" p-id="803" fill="#2c2c2c"></path></svg>
												<span id="busuanzi_value_site_uv"></span>
											</span>
											
											<script>
											    function siteTime(){
											        window.setTimeout("siteTime()", 1000);
											        var seconds = 1000;
											        var minutes = seconds * 60;
											        var hours = minutes * 60;
											        var days = hours * 24;
											        var years = days * 365;
											        var today = new Date();
											        var todayYear = today.getFullYear();
											        var todayMonth = today.getMonth()+1;
											        var todayDate = today.getDate();
											        var todayHour = today.getHours();
											        var todayMinute = today.getMinutes();
											        var todaySecond = today.getSeconds();
											        var t1 = Date.UTC(2019,09,02,21,26,00);  //此处填写建站时间 依次为 年,月,日,时,分,秒注意格式 半角,
											        var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
											        var diff = t2-t1;
											        var diffYears = Math.floor(diff/years);
											        var diffDays = Math.floor((diff/days)-diffYears*365);
											        var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
											        var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
											        var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
											        document.getElementById("sitetime").innerHTML="kily007's blog已运行"+diffYears+" 年 "+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
											    }
											    siteTime();
											</script>
											
            </div>
			
            <div id="update" style="display:none;">
                off
            </div>
			
			
            
                    <script>
                        var pat = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + pat + '</div>')
                    </script>
					
					
			<script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>		
			<script>
			var _hmt = _hmt || [];
			(function() {
			  var hm = document.createElement("script");
			  hm.src = "https://hm.baidu.com/hm.js?3aca18fa9f3a7e31f0ce64c09c9e5165";
			  var s = document.getElementsByTagName("script")[0]; 
			  s.parentNode.insertBefore(hm, s);
			})();
			</script>
        </footer>
        
            <script src='https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js'></script>
            
                <script>
                    
                    
                    loadlive2d();
                    
                    
                    hitokoto();
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    var newDate = new Date();
                    newDate.setTime(1592817813598);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
                

        </div>
</body>
<script>
    scroll();
</script>

</html>